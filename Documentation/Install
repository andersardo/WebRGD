#mongodb
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10
echo "deb http://repo.mongodb.org/apt/ubuntu "$(lsb_release -sc)"/mongodb-org/3.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.0.list
sudo apt-get update
sudo apt-get install -y mongodb-org

#standard packages
sudo apt-get install libsvm-dev libsvm-tools python-libsvm python-pip python-setuptools python-dev openjdk-7-jdk ant g++ git

#för indataValidering PHP-program
sudo apt-get install php5-cli php5-mysql mysql-server 

#PyLucene - download latest release from http://lucene.apache.org/pylucene/
cd Downloads/
tar zxvf pylucene-4.10.1-1-src.tar.gz 
cd pylucene-4.10.1-1/
cd jcc
#Check setup.py 
python setup.py build
sudo python setup.py install

cd ..
#Check Makefile - uncomment Linux
make
make test
  #check for errors
sudo make install

#install some python packages
sudo easy_install pymongo
sudo easy_install -U bottle
sudo easy_install Beaker
sudo easy_install bottle-cork
sudo easy_install cherrypy

#get gedMerge
git clone https://github.com/andersardo/gedMerge.git
cd gedMerge/

#install Gedcom-parser
git clone https://github.com/andersardo/simplepyged.git
mkdir gedcom
cp simplepyged/simplepyged/* gedcom/

#initialize conf-directory
mkdir conf
cp -r conf.example/* conf/
  <EVT edit conf/config.py t.ex. porten>
cp conf.example/fsndata.txt PHP/

#Fixa mysql-databas enligt PHP/README
#php-programmen behöver MySQL
#  databas test initialiserad från testDump.sql
#  användare 'rgd' passwd 'pilot' med access till databas test

mysql -u root
mysql> CREATE DATABASE test CHARACTER SET utf8 COLLATE utf8_swedish_ci;
mysql> CREATE USER 'rgd'@'localhost' IDENTIFIED BY 'pilot';
mysql> GRANT ALL PRIVILEGES ON test.* TO 'rgd'@'localhost' WITH GRANT OPTION;

mysql -u root test < PHP/testDump.sql 

#start webserver
python UI.py

#testa med browser - logga in som admin/admin och prova.
#länken 'admin page' på mitten av sidan ger möjlighet att skapa användare

